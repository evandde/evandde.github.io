<!doctype html><html data-bs-theme=light itemscope itemtype=http://schema.org/WebPage lang=ko><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=manifest href=https://evanote.mew.kr/manifest.webmanifest><meta name=description content="Geant4 무작정 따라하기 시리즈의 여섯번째. Physical Volume을 정의하여 지오메트리를 시뮬레이션 세계에 배치해 보겠습니다.
"><link rel=icon href=/favicon-16x16.png sizes=16x16 type=image/png><link rel=icon href=/favicon-32x32.png sizes=32x32 type=image/png><link rel=icon href=/favicon-150x150.png sizes=150x150 type=image/png><link rel=apple-touch-icon href=/apple-touch-icon.png sizes=180x180 type=image/png><link rel=icon href=/favicon-192x192.png sizes=192x192 type=image/png><link rel=mask-icon href=/mask-icon.svg color=#000000><meta property="og:title" content="Geant4 무작정 따라하기 - 6. 지오메트리 배치하기"><meta property="og:description" content="Geant4 무작정 따라하기 시리즈의 여섯번째. Physical Volume을 정의하여 지오메트리를 시뮬레이션 세계에 배치해 보겠습니다."><meta property="og:type" content="article"><meta property="og:url" content="https://evanote.mew.kr/doc_g4noqasked/chap2_geometry/g4-noqasked-006-phyvol/"><meta property="og:image" content="https://evanote.mew.kr/"><meta property="article:section" content="doc_g4noqasked"><meta property="article:published_time" content="2021-06-17T19:23:49+09:00"><meta property="article:modified_time" content="2021-06-17T19:23:49+09:00"><meta itemprop=name content="Geant4 무작정 따라하기 - 6. 지오메트리 배치하기"><meta itemprop=description content="Geant4 무작정 따라하기 시리즈의 여섯번째. Physical Volume을 정의하여 지오메트리를 시뮬레이션 세계에 배치해 보겠습니다."><meta itemprop=datePublished content="2021-06-17T19:23:49+09:00"><meta itemprop=dateModified content="2021-06-17T19:23:49+09:00"><meta itemprop=wordCount content="1754"><meta itemprop=image content="https://evanote.mew.kr/"><meta itemprop=keywords content="HowTo,Geant4,PhysicalVolume,G4PVPlacement,G4VPhysicalVolume,"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://evanote.mew.kr/"><meta name=twitter:title content="Geant4 무작정 따라하기 - 6. 지오메트리 배치하기"><meta name=twitter:description content="Geant4 무작정 따라하기 시리즈의 여섯번째. Physical Volume을 정의하여 지오메트리를 시뮬레이션 세계에 배치해 보겠습니다."><title>Geant4 무작정 따라하기 - 6. 지오메트리 배치하기 - 지오메트리 - Geant4 무작정 따라하기 - EvaNOTE</title><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3621798796175855" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EENM61GFMT"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-EENM61GFMT",{anonymize_ip:!1})}</script><link href="/css/hb.2a5ce189af9ff60967ef2ebbd35724251db06d22aabe2d842388d0343cd3c906.css" rel=stylesheet><script src=/js/init.b980cf5ff873691f491c400ab7f55079eb2d1eef456f2eec75db7cf3d8c9dcc7.js integrity="sha256-uYDPX/hzaR9JHEAKt/VQeestHu9Fby7sddt889jJ3Mc="></script></head><body><noscript><div class="alert alert-danger text-center rounded-0" role=alert><svg aria-hidden="true" class="bi bi-exclamation-square-fillbi bi-exclamation-square-fill hi-svg-inline me-2" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M2 0A2 2 0 000 2v12a2 2 0 002 2h12a2 2 0 002-2V2a2 2 0 00-2-2H2zm6 4c.535.0.954.462.9.995l-.35 3.507a.552.552.0 01-1.1.0L7.1 4.995A.905.905.0 018 4zm.002 6a1 1 0 110 2 1 1 0 010-2z"/></svg>사용하고 계신 브라우저가 JavaScript를 지원하지 않습니다.</div></noscript><header class=hb-header><nav class="hb-header-nav navbar navbar-expand-lg"><div class="hb-announcement-bar text-center px-1 py-2 w-100 overflow-hidden border-bottom border-secondary"><div class="hb-announcement text-truncate active">EvaNOTE가 대공사를 마쳤습니다!!</div></div><div class=container-fluid><button class="navbar-toggler border-0 shadow-none d-lg-none" type=button data-bs-toggle=offcanvas data-bs-target=.hb-docs-nav aria-expanded=false aria-label="Toggle docs navigation"><svg aria-hidden="true" class="bi bi-listbi bi-list hi-svg-inline" fill="currentcolor" height="1.25em" viewBox="0 0 16 16" width="1.25em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M2.5 12a.5.5.0 01.5-.5h10a.5.5.0 010 1H3a.5.5.0 01-.5-.5zm0-4a.5.5.0 01.5-.5h10a.5.5.0 010 1H3A.5.5.0 012.5 8zm0-4a.5.5.0 01.5-.5h10a.5.5.0 010 1H3A.5.5.0 012.5 4z"/></svg></button>
<a class="navbar-brand d-flex align-items-center" href=/><img src=https://evanote.mew.kr/images/logo_hu92b1688a25baf49e9be40db616e2b188_18319_0x64_resize_box_3.png alt=Logo width=64 height=64 class="hb-header-logo d-inline-block align-text-top me-2">EvaNOTE</a><div class="d-flex order-5"><div class="search-modal-toggle hb-header-search-form position-relative d-flex ms-lg-1"><button type=button class="hb-header-search-icon border-0 bg-transparent px-2" aria-label="Toggle search"><svg aria-hidden="true" class="bi bi-searchbi bi-search hi-svg-inline" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M11.742 10.344a6.5 6.5.0 10-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 001.415-1.414l-3.85-3.85a1.007 1.007.0 00-.115-.1zM12 6.5a5.5 5.5.0 11-11 0 5.5 5.5.0 0111 0z"/></svg></button>
<input class="form-control rounded-5 d-none d-lg-block ms-lg-1" placeholder=검색>
<span class="hb-header-search-keys position-absolute d-none d-lg-block"><kbd>CTRL</kbd>
<kbd>K</kbd></span></div><button class="navbar-toggler border-0 shadow-none" type=button data-bs-toggle=offcanvas data-bs-target=#hb-header-content aria-controls=hb-header-content aria-label="Toggle navigation"><svg aria-hidden="true" class="bi bi-three-dotsbi bi-three-dots hi-svg-inline" fill="currentcolor" height="1.25em" viewBox="0 0 16 16" width="1.25em" xmlns="http://www.w3.org/2000/svg"><path d="M3 9.5a1.5 1.5.0 110-3 1.5 1.5.0 010 3zm5 0a1.5 1.5.0 110-3 1.5 1.5.0 010 3zm5 0a1.5 1.5.0 110-3 1.5 1.5.0 010 3z"/></svg></button></div><div class="offcanvas offcanvas-lg offcanvas-end" tabindex=-1 id=hb-header-content aria-labelledby=hb-header-content-label><div class=offcanvas-header><h5 class=offcanvas-title id=hb-header-content-label>EvaNOTE</h5><button type=button class=btn-close data-bs-dismiss=offcanvas aria-label=Close></button></div><div class=offcanvas-body><ul class="hb-header-menus navbar-nav flex-row flex-wrap"><li class="hb-header-menu dropdown nav-item col-12 col-lg-auto"><a class=nav-link id=header-menu-blog href role=button data-bs-toggle=dropdown data-bs-reference=#header-menu-blog-submenus aria-expanded=false><div class="nav-link-content d-flex align-items-center"><svg aria-hidden="true" class="hi-svg-inline hb-header-menu-icon me-1" fill="currentcolor" height="1em" style="color:violet" viewBox="0 0 512 512" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M192 32c0 17.7 14.3 32 32 32 123.7.0 224 100.3 224 224 0 17.7 14.3 32 32 32s32-14.3 32-32C512 128.9 383.1.0 224 0c-17.7.0-32 14.3-32 32zm0 96c0 17.7 14.3 32 32 32 70.7.0 128 57.3 128 128 0 17.7 14.3 32 32 32s32-14.3 32-32c0-106-86-192-192-192-17.7.0-32 14.3-32 32zM96 144c0-26.5-21.5-48-48-48S0 117.5.0 144V368c0 79.5 64.5 144 144 144s144-64.5 144-144-64.5-144-144-144H128v96h16c26.5.0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48V144z"/></svg>단편글<span class="dropdown-toggle-icon d-flex align-items-center ms-1"><svg aria-hidden="true" class="bi bi-chevron-compact-downbi bi-chevron-compact-down hi-svg-inline" fill="currentcolor" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M1.553 6.776a.5.5.0 01.67-.223L8 9.44l5.776-2.888a.5.5.0 11.448.894l-6 3a.5.5.0 01-.448.0l-6-3a.5.5.0 01-.223-.67z"/></svg></span></div></a><ul class="hb-header-submenus dropdown-menu" aria-labelledby=header-menu-blog data-bs-popper=none><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href=https://evanote.mew.kr/categories><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-folderbi bi-folder hi-svg-inline" fill="currentcolor" height="2em" style="color:orange" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M.54 3.87.5 3a2 2 0 012-2h3.672a2 2 0 011.414.586l.828.828A2 2 0 009.828 3h3.982a2 2 0 011.992 2.181l-.637 7A2 2 0 0113.174 14H2.826A2 2 0 01.835 12.181l-.637-7a1.99 1.99.0 01.342-1.31zM2.19 4a1 1 0 00-.996 1.09l.637 7a1 1 0 00.995.91h10.348a1 1 0 00.995-.91l.637-7A1 1 0 0013.81 4H2.19zm4.69-1.707A1 1 0 006.172 2H2.5a1 1 0 00-1 .981l.006.139C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707z"/></svg></div><div class=dropdown-item-content><div class="dropdown-item-title mb-1">카테고리</div><p class="dropdown-item-desc mb-0 text-wrap">카테고리별 보기</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href=https://evanote.mew.kr/tags><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-tagsbi bi-tags hi-svg-inline" fill="currentcolor" height="2em" style="color:green" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M3 2v4.586l7 7L14.586 9l-7-7H3zM2 2a1 1 0 011-1h4.586a1 1 0 01.707.293l7 7a1 1 0 010 1.414l-4.586 4.586a1 1 0 01-1.414.0l-7-7A1 1 0 012 6.586V2z"/><path d="M5.5 5a.5.5.0 110-1 .5.5.0 010 1zm0 1a1.5 1.5.0 100-3 1.5 1.5.0 000 3zM1 7.086a1 1 0 00.293.707L8.75 15.25l-.043.043a1 1 0 01-1.414.0l-7-7A1 1 0 010 7.586V3a1 1 0 011-1v5.086z"/></svg></div><div class=dropdown-item-content><div class="dropdown-item-title mb-1">태그</div><p class="dropdown-item-desc mb-0 text-wrap">태그별 보기</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href=https://evanote.mew.kr/archives><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-archivebi bi-archive hi-svg-inline" fill="currentcolor" height="2em" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M0 2a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1v7.5A2.5 2.5.0 0112.5 15h-9A2.5 2.5.0 011 12.5V5A1 1 0 010 4V2zm2 3v7.5A1.5 1.5.0 003.5 14h9a1.5 1.5.0 001.5-1.5V5H2zm13-3H1v2h14V2zM5 7.5a.5.5.0 01.5-.5h5a.5.5.0 010 1h-5A.5.5.0 015 7.5z"/></svg></div><div class=dropdown-item-content><div class="dropdown-item-title mb-1">ArXiv</div><p class="dropdown-item-desc mb-0 text-wrap">연도별 모아보기</p></div></a></li><li><hr class=dropdown-divider></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href=https://evanote.mew.kr/post><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="hi-svg-inline" fill="currentcolor" height="2em" style="color:violet" viewBox="0 0 512 512" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M192 32c0 17.7 14.3 32 32 32 123.7.0 224 100.3 224 224 0 17.7 14.3 32 32 32s32-14.3 32-32C512 128.9 383.1.0 224 0c-17.7.0-32 14.3-32 32zm0 96c0 17.7 14.3 32 32 32 70.7.0 128 57.3 128 128 0 17.7 14.3 32 32 32s32-14.3 32-32c0-106-86-192-192-192-17.7.0-32 14.3-32 32zM96 144c0-26.5-21.5-48-48-48S0 117.5.0 144V368c0 79.5 64.5 144 144 144s144-64.5 144-144-64.5-144-144-144H128v96h16c26.5.0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48V144z"/></svg></div><div class=dropdown-item-content><div class=dropdown-item-title>모든 단편글</div></div></a></li></ul></li><li class="hb-header-menu dropdown nav-item col-12 col-lg-auto"><a class=nav-link id=header-menu-series href role=button data-bs-toggle=dropdown data-bs-reference=#header-menu-series-submenus aria-expanded=false><div class="nav-link-content d-flex align-items-center"><svg aria-hidden="true" class="hi-svg-inline hb-header-menu-icon me-1" fill="currentcolor" height="1em" viewBox="0 0 448 512" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M96 0C43 0 0 43 0 96V416c0 53 43 96 96 96H384h32c17.7.0 32-14.3 32-32s-14.3-32-32-32V384c17.7.0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H384 96zm0 384H352v64H96c-17.7.0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16H336c8.8.0 16 7.2 16 16s-7.2 16-16 16H144c-8.8.0-16-7.2-16-16zm16 48H336c8.8.0 16 7.2 16 16s-7.2 16-16 16H144c-8.8.0-16-7.2-16-16s7.2-16 16-16z"/></svg>연재글<span class="dropdown-toggle-icon d-flex align-items-center ms-1"><svg aria-hidden="true" class="bi bi-chevron-compact-downbi bi-chevron-compact-down hi-svg-inline" fill="currentcolor" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M1.553 6.776a.5.5.0 01.67-.223L8 9.44l5.776-2.888a.5.5.0 11.448.894l-6 3a.5.5.0 01-.448.0l-6-3a.5.5.0 01-.223-.67z"/></svg></span></div></a><ul class="hb-header-submenus dropdown-menu" aria-labelledby=header-menu-series data-bs-popper=none><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href=https://evanote.mew.kr/doc_g4install/><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-bookbi bi-book hi-svg-inline" fill="currentcolor" height="2em" style="color:#e24d0e" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811V2.828zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5.0 000 2.5v11a.5.5.0 00.707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5.0 00.78.0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5.0 0016 13.5v-11a.5.5.0 00-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z"/></svg></div><div class=dropdown-item-content><div class=dropdown-item-title>Geant4 설치 가이드</div></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center active" href=https://evanote.mew.kr/doc_g4noqasked/><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-bookbi bi-book hi-svg-inline" fill="currentcolor" height="2em" style="color:#e24d0e" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811V2.828zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5.0 000 2.5v11a.5.5.0 00.707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5.0 00.78.0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5.0 0016 13.5v-11a.5.5.0 00-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z"/></svg></div><div class=dropdown-item-content><div class=dropdown-item-title>Geant4 무작정 따라하기</div></div></a></li><li><hr class=dropdown-divider></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href=https://evanote.mew.kr/series><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="hi-svg-inline" fill="currentcolor" height="2em" viewBox="0 0 448 512" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M96 0C43 0 0 43 0 96V416c0 53 43 96 96 96H384h32c17.7.0 32-14.3 32-32s-14.3-32-32-32V384c17.7.0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H384 96zm0 384H352v64H96c-17.7.0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16H336c8.8.0 16 7.2 16 16s-7.2 16-16 16H144c-8.8.0-16-7.2-16-16zm16 48H336c8.8.0 16 7.2 16 16s-7.2 16-16 16H144c-8.8.0-16-7.2-16-16s7.2-16 16-16z"/></svg></div><div class=dropdown-item-content><div class=dropdown-item-title>모든 연재글</div></div></a></li></ul></li></ul><ul class="hb-header-panel navbar-nav flex-row flex-wrap"><li class="nav-item py-2 py-lg-1 col-12 col-lg-auto"><hr class="d-lg-none my-2 text-body-50"></li><li class="nav-item col-6 col-lg-auto d-flex align-items-center"><a class="hb-social btn btn-link nav-link py-2 px-0 px-lg-2 d-flex justify-content-center align-items-center" href=https://github.com/evandde target=_blank rel="nofollow me" title=GitHub><svg aria-hidden="true" class="hi-svg-inline hb-social-icon" fill="currentcolor" height="1em" role="img" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg><span class="hb-social-text d-lg-none ms-1">GitHub</span></a></li><li class="nav-item col-6 col-lg-auto d-flex align-items-center"><a class="hb-social btn btn-link nav-link py-2 px-0 px-lg-2 d-flex justify-content-center align-items-center" href=mailto:evandde@gmail.com target=_blank rel="nofollow me" title=Gmail><svg aria-hidden="true" class="hi-svg-inline hb-social-icon" fill="currentcolor" height="1em" role="img" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><title>Gmail</title><path d="M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636.0 010 19.366V5.457c0-2.023 2.309-3.178 3.927-1.964L5.455 4.64 12 9.548l6.545-4.91 1.528-1.145C21.69 2.28 24 3.434 24 5.457z"/></svg><span class="hb-social-text d-lg-none ms-1">Gmail</span></a></li><li class="nav-item py-2 py-lg-1 col-12 col-lg-auto"><div class="vr d-none d-lg-flex h-100 mx-lg-2 text-body"></div><hr class="d-lg-none my-2 text-body-50"></li><li class="theme-toggle nav-item dropdown col-6 col-lg-auto d-flex flex-column justify-content-center"><a class="btn btn-link nav-link py-2 px-0 px-lg-2 d-flex justify-content-start justify-content-lg-center align-items-center" href=# role=button data-bs-toggle=dropdown aria-expanded=false><svg aria-hidden="true" class="bi bi-circle-halfbi bi-circle-half hi-svg-inline my-1 theme-toggle-icon" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 15A7 7 0 108 1v14zm0 1A8 8 0 118 0a8 8 0 010 16z"/></svg><span class="d-lg-none ms-1"></span></a><ul class="theme-toggle-menu dropdown-menu dropdown-menu-end"><li><button class="theme-toggle-item dropdown-item d-flex align-items-center justify-content-center" data-bs-theme-value=auto>
<span class="theme-toggle-item-icon me-1 d-flex align-items-center"><svg aria-hidden="true" class="bi bi-circle-halfbi bi-circle-half hi-svg-inline my-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 15A7 7 0 108 1v14zm0 1A8 8 0 118 0a8 8 0 010 16z"/></svg></span></button></li><li><button class="theme-toggle-item dropdown-item d-flex align-items-center justify-content-center" data-bs-theme-value=dark>
<span class="theme-toggle-item-icon me-1 d-flex align-items-center"><svg aria-hidden="true" class="bi bi-moon-starsbi bi-moon-stars hi-svg-inline my-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278zM4.858 1.311A7.269 7.269.0 001.025 7.71c0 4.02 3.279 7.276 7.319 7.276a7.316 7.316.0 005.205-2.162c-.337.042-.68.063-1.029.063-4.61.0-8.343-3.714-8.343-8.29.0-1.167.242-2.278.681-3.286z"/><path d="M10.794 3.148a.217.217.0 01.412.0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217.0 010 .412l-1.162.387A1.734 1.734.0 0011.593 7.69l-.387 1.162a.217.217.0 01-.412.0l-.387-1.162A1.734 1.734.0 009.31 6.593l-1.162-.387a.217.217.0 010-.412l1.162-.387a1.734 1.734.0 001.097-1.097l.387-1.162zM13.863.099a.145.145.0 01.274.0l.258.774c.115.346.386.617.732.732l.774.258a.145.145.0 010 .274l-.774.258a1.156 1.156.0 00-.732.732l-.258.774a.145.145.0 01-.274.0l-.258-.774a1.156 1.156.0 00-.732-.732l-.774-.258a.145.145.0 010-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/></svg></span></button></li><li><button class="theme-toggle-item dropdown-item d-flex align-items-center justify-content-center" data-bs-theme-value=light>
<span class="theme-toggle-item-icon me-1 d-flex align-items-center"><svg aria-hidden="true" class="bi bi-brightness-highbi bi-brightness-high hi-svg-inline my-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 11a3 3 0 110-6 3 3 0 010 6zm0 1a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></svg></span></button></li></ul></li></ul></div></div></div></nav></header><div class="hb-main container-fluid"><div class=hb-docs><div class=hb-docs-sidebar tabindex=-1 data-bs-hide=focusout><div class="hb-docs-nav offcanvas-lg pe-lg-2 offcanvas-start" aria-labelledby=hb-docs-nav-label><div class="offcanvas-header border-bottom"><h5 class=offcanvas-title id=hb-docs-nav-label>문서 탐색</h5><button type=button class=btn-close data-bs-dismiss=offcanvas aria-label=Close data-bs-target=.hb-docs-nav></button></div><div class="offcanvas-body flex-column text-body-secondary"><ul class="hb-docs-nav-links list-unstyled"><li class=hb-docs-nav-links-group><div class="hb-docs-nav-heading d-flex align-items-center justify-content-between rounded"><a class="d-flex flex-grow-1 align-items-center" href=/doc_g4noqasked/chap1_opening/>기본 지식</a>
<button class="hb-docs-nav-toggle btn btn-link py-0 px-1 text-secondary d-flex align-items-center" type=button data-bs-toggle=collapse data-bs-target=#collapse-7e4064e61342ff69fac4d64518e02f00 aria-expanded=false aria-controls=collapse-7e4064e61342ff69fac4d64518e02f00><svg aria-hidden="true" class="bi bi-chevron-rightbi bi-chevron-right hi-svg-inline hb-docs-nav-toggle-icon" fill="currentcolor" height="1.25rem" viewBox="0 0 16 16" width="1.25rem" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.646 1.646a.5.5.0 01.708.0l6 6a.5.5.0 010 .708l-6 6a.5.5.0 01-.708-.708L10.293 8 4.646 2.354a.5.5.0 010-.708z"/></svg></button></div><ul class="collapse list-unstyled fw-normal small ms-2" id=collapse-7e4064e61342ff69fac4d64518e02f00><li class=hb-docs-nav-links-span-all><a class="hb-docs-nav-link d-flex align-items-center rounded" href=/doc_g4noqasked/chap1_opening/p1_opening/>들어가며</a></li><li class=hb-docs-nav-links-span-all><a class="hb-docs-nav-link d-flex align-items-center rounded" href=/doc_g4noqasked/chap1_opening/p2_clonetest/>템플릿 코드 실행하기</a></li></ul></li><li class=hb-docs-nav-links-group><div class="hb-docs-nav-heading d-flex align-items-center justify-content-between rounded active"><a class="d-flex flex-grow-1 align-items-center" href=/doc_g4noqasked/chap2_geometry/>지오메트리</a>
<button class="hb-docs-nav-toggle btn btn-link py-0 px-1 text-secondary d-flex align-items-center" type=button data-bs-toggle=collapse data-bs-target=#collapse-d87db2f536cd8f8e66c07a421283107e aria-expanded=true aria-controls=collapse-d87db2f536cd8f8e66c07a421283107e><svg aria-hidden="true" class="bi bi-chevron-rightbi bi-chevron-right hi-svg-inline hb-docs-nav-toggle-icon" fill="currentcolor" height="1.25rem" viewBox="0 0 16 16" width="1.25rem" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.646 1.646a.5.5.0 01.708.0l6 6a.5.5.0 010 .708l-6 6a.5.5.0 01-.708-.708L10.293 8 4.646 2.354a.5.5.0 010-.708z"/></svg></button></div><ul class="collapse list-unstyled fw-normal small ms-2 show" id=collapse-d87db2f536cd8f8e66c07a421283107e><li class=hb-docs-nav-links-span-all><a class="hb-docs-nav-link d-flex align-items-center rounded" href=/doc_g4noqasked/chap2_geometry/g4-noqasked-002-detcon/>지오메트리 정의 기본이론</a></li><li class=hb-docs-nav-links-span-all><a class="hb-docs-nav-link d-flex align-items-center rounded" href=/doc_g4noqasked/chap2_geometry/g4-noqasked-003-solid/>지오메트리 모양 만들기</a></li><li class=hb-docs-nav-links-span-all><a class="hb-docs-nav-link d-flex align-items-center rounded" href=/doc_g4noqasked/chap2_geometry/g4-noqasked-004-material/>물질 정의 및 사용</a></li><li class=hb-docs-nav-links-span-all><a class="hb-docs-nav-link d-flex align-items-center rounded" href=/doc_g4noqasked/chap2_geometry/g4-noqasked-005-clhepclasses/>위치, 회전을 정의하는 법</a></li><li class=hb-docs-nav-links-span-all><a class="hb-docs-nav-link d-flex align-items-center rounded active" href=/doc_g4noqasked/chap2_geometry/g4-noqasked-006-phyvol/>지오메트리 배치하기</a></li></ul></li><li class=hb-docs-nav-links-group><div class="hb-docs-nav-heading d-flex align-items-center justify-content-between rounded"><a class="d-flex flex-grow-1 align-items-center" href=/doc_g4noqasked/chap3_verbose/>Geant4 Verbose</a>
<button class="hb-docs-nav-toggle btn btn-link py-0 px-1 text-secondary d-flex align-items-center" type=button data-bs-toggle=collapse data-bs-target=#collapse-21bf2d3849e3a9343c8b4f3bb76f89a1 aria-expanded=false aria-controls=collapse-21bf2d3849e3a9343c8b4f3bb76f89a1><svg aria-hidden="true" class="bi bi-chevron-rightbi bi-chevron-right hi-svg-inline hb-docs-nav-toggle-icon" fill="currentcolor" height="1.25rem" viewBox="0 0 16 16" width="1.25rem" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.646 1.646a.5.5.0 01.708.0l6 6a.5.5.0 010 .708l-6 6a.5.5.0 01-.708-.708L10.293 8 4.646 2.354a.5.5.0 010-.708z"/></svg></button></div><ul class="collapse list-unstyled fw-normal small ms-2" id=collapse-21bf2d3849e3a9343c8b4f3bb76f89a1><li class=hb-docs-nav-links-span-all><a class="hb-docs-nav-link d-flex align-items-center rounded" href=/doc_g4noqasked/chap3_verbose/g4-noqasked-007-trkvb/>기본용어와 Tracking Verbose</a></li></ul></li><li class=hb-docs-nav-links-group><div class="hb-docs-nav-heading d-flex align-items-center justify-content-between rounded"><a class="d-flex flex-grow-1 align-items-center" href=/doc_g4noqasked/chap4_primgen/>선원항</a>
<button class="hb-docs-nav-toggle btn btn-link py-0 px-1 text-secondary d-flex align-items-center" type=button data-bs-toggle=collapse data-bs-target=#collapse-be003eba36b94a0c3598d9ef95d2becf aria-expanded=false aria-controls=collapse-be003eba36b94a0c3598d9ef95d2becf><svg aria-hidden="true" class="bi bi-chevron-rightbi bi-chevron-right hi-svg-inline hb-docs-nav-toggle-icon" fill="currentcolor" height="1.25rem" viewBox="0 0 16 16" width="1.25rem" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.646 1.646a.5.5.0 01.708.0l6 6a.5.5.0 010 .708l-6 6a.5.5.0 01-.708-.708L10.293 8 4.646 2.354a.5.5.0 010-.708z"/></svg></button></div><ul class="collapse list-unstyled fw-normal small ms-2" id=collapse-be003eba36b94a0c3598d9ef95d2becf><li class=hb-docs-nav-links-span-all><a class="hb-docs-nav-link d-flex align-items-center rounded" href=/doc_g4noqasked/chap4_primgen/g4-noqasked-008-prigen/>선원항을 정의하는 법</a></li><li class=hb-docs-nav-links-span-all><a class="hb-docs-nav-link d-flex align-items-center rounded" href=/doc_g4noqasked/chap4_primgen/g4-noqasked-009-randtool/>난수 기반 선원항 정의하기</a></li></ul></li><li class=hb-docs-nav-links-group><div class="hb-docs-nav-heading d-flex align-items-center justify-content-between rounded"><a class="d-flex flex-grow-1 align-items-center" href=/doc_g4noqasked/chap5_scoring/>스코어링</a>
<button class="hb-docs-nav-toggle btn btn-link py-0 px-1 text-secondary d-flex align-items-center" type=button data-bs-toggle=collapse data-bs-target=#collapse-1411e414e68b81148dd05fa648ca5f33 aria-expanded=false aria-controls=collapse-1411e414e68b81148dd05fa648ca5f33><svg aria-hidden="true" class="bi bi-chevron-rightbi bi-chevron-right hi-svg-inline hb-docs-nav-toggle-icon" fill="currentcolor" height="1.25rem" viewBox="0 0 16 16" width="1.25rem" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.646 1.646a.5.5.0 01.708.0l6 6a.5.5.0 010 .708l-6 6a.5.5.0 01-.708-.708L10.293 8 4.646 2.354a.5.5.0 010-.708z"/></svg></button></div><ul class="collapse list-unstyled fw-normal small ms-2" id=collapse-1411e414e68b81148dd05fa648ca5f33><li class=hb-docs-nav-links-span-all><a class="hb-docs-nav-link d-flex align-items-center rounded" href=/doc_g4noqasked/chap5_scoring/g4-noqasked-010-scoringtheory/>스코어링 이론</a></li><li class=hb-docs-nav-links-span-all><a class="hb-docs-nav-link d-flex align-items-center rounded" href=/doc_g4noqasked/chap5_scoring/g4-noqasked-011-scoring/>스코어링 구현하기</a></li><li class=hb-docs-nav-links-span-all><a class="hb-docs-nav-link d-flex align-items-center rounded" href=/doc_g4noqasked/chap5_scoring/g4-noqasked-012-writingrslt1/>결과를 Histogram으로 기록하기</a></li><li class=hb-docs-nav-links-span-all><a class="hb-docs-nav-link d-flex align-items-center rounded" href=/doc_g4noqasked/chap5_scoring/g4-noqasked-013-writingrslt2/>결과를 Ntuple로 기록하기</a></li></ul></li><li class=hb-docs-nav-links-group><div class="hb-docs-nav-heading d-flex align-items-center justify-content-between rounded"><a class="d-flex flex-grow-1 align-items-center" href=/doc_g4noqasked/chap6_closing/>마무리</a>
<button class="hb-docs-nav-toggle btn btn-link py-0 px-1 text-secondary d-flex align-items-center" type=button data-bs-toggle=collapse data-bs-target=#collapse-66ad07cfa6fc3e2fe9555bd4e3552dc6 aria-expanded=false aria-controls=collapse-66ad07cfa6fc3e2fe9555bd4e3552dc6><svg aria-hidden="true" class="bi bi-chevron-rightbi bi-chevron-right hi-svg-inline hb-docs-nav-toggle-icon" fill="currentcolor" height="1.25rem" viewBox="0 0 16 16" width="1.25rem" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.646 1.646a.5.5.0 01.708.0l6 6a.5.5.0 010 .708l-6 6a.5.5.0 01-.708-.708L10.293 8 4.646 2.354a.5.5.0 010-.708z"/></svg></button></div><ul class="collapse list-unstyled fw-normal small ms-2" id=collapse-66ad07cfa6fc3e2fe9555bd4e3552dc6><li class=hb-docs-nav-links-span-all><a class="hb-docs-nav-link d-flex align-items-center rounded" href=/doc_g4noqasked/chap6_closing/g4-noqasked-014-closing/>마치며</a></li></ul></li></ul></div></div></div><div class=hb-docs-main><div class="hb-module container-fluid px-0"><nav aria-label=breadcrumb><ol class="hb-breadcrumb breadcrumb"><li class=breadcrumb-item><a href=/ title="EvaNOTE - 지식과 경험의 기록">홈</a></li><li class=breadcrumb-item><a href=/doc_g4noqasked/ title="Geant4 무작정 따라하기">Geant4 무작정 따라하기</a></li><li class=breadcrumb-item><a href=/doc_g4noqasked/chap2_geometry/ title=지오메트리>지오메트리</a></li><li class="breadcrumb-item active" aria-current=page><a href=/doc_g4noqasked/chap2_geometry/g4-noqasked-006-phyvol/ title="Geant4 무작정 따라하기 - 6. 지오메트리 배치하기">Geant4 무작정 따라하기 - 6. 지오메트리 배치하기</a></li></ol></nav></div><div class=hb-docs-doc><div class=hb-docs-doc-intro><h1 class=mb-3>Geant4 무작정 따라하기 - 6. 지오메트리 배치하기</h1><div class="hb-blog-post-meta hb-docs-doc-meta mb-3"><span class=hb-docs-doc-date>2021년 6월 17일</span>
<span class=hb-blog-post-reading-time>읽는 데에 9분</span>
<span class=hb-blog-post-taxonomy-meta><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href=/categories/geant4/>Geant4</a></span>
<span class=hb-blog-post-taxonomy-meta><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href=/series/geant4-%EB%AC%B4%EC%9E%91%EC%A0%95-%EB%94%B0%EB%9D%BC%ED%95%98%EA%B8%B0/>Geant4 무작정 따라하기</a></span>
<span class=hb-blog-post-taxonomy-meta><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-tag badge bg-secondary text-decoration-none fw-normal me-1" href=/tags/howto/>HowTo</a></span>
<span class=hb-blog-post-taxonomy-meta><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-tag badge bg-secondary text-decoration-none fw-normal me-1" href=/tags/geant4/>Geant4</a></span>
<span class=hb-blog-post-taxonomy-meta><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-tag badge bg-secondary text-decoration-none fw-normal me-1" href=/tags/physicalvolume/>PhysicalVolume</a></span>
<span class=hb-blog-post-taxonomy-meta><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-tag badge bg-secondary text-decoration-none fw-normal me-1" href=/tags/g4pvplacement/>G4PVPlacement</a></span>
<span class=hb-blog-post-taxonomy-meta><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-tag badge bg-secondary text-decoration-none fw-normal me-1" href=/tags/g4vphysicalvolume/>G4VPhysicalVolume</a></span></div></div><div class="hb-docs-doc-toc ps-lg-3 text-body-secondary"><div class="h6 d-none d-md-block">목차</div><hr class="d-none d-md-block"><div class="d-grid d-block d-md-none mb-2"><button class="btn btn-light d-flex align-items-center justify-content-between collapsed" type=button data-bs-toggle=collapse data-bs-target=.hb-docs-doc-toc-collapse aria-expanded=false aria-controls=collapse-toc>
<span>목차</span><svg aria-hidden="true" class="bi bi-chevron-expandbi bi-chevron-expand hi-svg-inline ms-2" fill="currentcolor" height="1.25rem" viewBox="0 0 16 16" width="1.25rem" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3.646 9.146a.5.5.0 01.708.0L8 12.793l3.646-3.647a.5.5.0 01.708.708l-4 4a.5.5.0 01-.708.0l-4-4a.5.5.0 010-.708zm0-2.292a.5.5.0 00.708.0L8 3.207l3.646 3.647a.5.5.0 00.708-.708l-4-4a.5.5.0 00-.708.0l-4 4a.5.5.0 000 .708z"/></svg></button></div><div class="px-2 px-md-0"><div id=collapse-toc class="collapse hb-docs-doc-toc-collapse"><nav id=TableOfContents><ul><li><a href=#기본-이론>기본 이론</a><ul><li><a href=#world>World</a></li><li><a href=#mother-volume--daughter-volume>Mother Volume & Daughter Volume</a></li><li><a href=#copy-number>Copy Number</a></li><li><a href=#배치할-때의-주의사항>배치할 때의 주의사항</a></li></ul></li><li><a href=#physical-volume의-종류>Physical Volume의 종류</a></li><li><a href=#g4pvplacement>G4PVPlacement</a><ul><li><a href=#생성자>생성자</a></li><li><a href=#나머지-두-가지-생성자>나머지 두 가지 생성자</a></li></ul></li><li><a href=#정리>정리</a></li></ul></nav></div></div></div><div class=hb-docs-doc-main><div class="hb-docs-doc-content mb-5" data-bs-spy=scroll data-bs-target=#TableOfContents><p>Geant4 무작정 따라하기 시리즈의 여섯번째. Physical Volume을 정의하여 지오메트리를 시뮬레이션 세계에 배치해 보겠습니다.</p><hr><h2 id=기본-이론>기본 이론</h2><p>Physical Volume을 정의하는 방법을 이해하려면, 먼저 다음의 개념에 대해 알아야 합니다.</p><ul><li>World</li><li>Mother Volume & Daughter Volume</li><li>Copy number</li></ul><h3 id=world>World</h3><p>Geant4 시뮬레이션은 여러 다양한 지오메트리를 놓아 구성된 공간에서 이루어집니다. 이 중 <strong>가장 큰 최외곽의 지오메트리</strong>를 <strong>World</strong>라고 합니다. World는 적당한 수준의 여유공간을 두고 <strong>모든 다른 지오메트리를 World 내부에 포함</strong>할 수 있도록 설정되어야 합니다. World는 가장 간단하고 연산측면에서도 효율성이 좋은 <strong>G4Box 형태</strong>로 제작하는 것이 일반적입니다.</p><p>실제 세상에서 외부 환경은 무한히 펼쳐져 있지만, 아주 멀리 있는 구조물이나 공기같은 환경적 요인이 관심있는 대상물에서 계측하는 결과에 유의미한 영향을 줄 확률은 그리 높지 않을 것이라 생각할 수 있습니다. 시뮬레이션으로 실제 세상을 모사할 때 무한한 공간을 다 넣을 수는 없으므로 <strong>적당한 수준에서 잘라내어 모사</strong>를 하게 될 것입니다. 이 <strong>잘라진 세상의 경계</strong>를 <strong>World</strong>라고 생각하시면 됩니다.</p><p>어떤 지오메트리나 입자도 World 바깥에서는 정의되지 않습니다. 어떤 입자가 수송되는 과정에서 World의 경계면을 만나 외부로 나가려는 순간이 되면, Geant4는 더 이상 그 입자를 수송하지 않고 그 즉시 해당 입자에 대한 연산을 종료합니다. 관심 영역 밖으로 탈출한 입자로 보는 것입니다.</p><h3 id=mother-volume--daughter-volume>Mother Volume & Daughter Volume</h3><p>Geant4에서는 모든 지오메트리가 다른 지오메트리에 포함되는 구조로 배치되어야만 합니다. 우리가 작성하고 있는 코드를 예로 들자면, water phantom이라는 지오메트리는 World라는 지오메트리 내에 포함되어 있는 식으로 말입니다. 이렇게 A라는 지오메트리가 B 지오메트리 내에 포함될 때, <strong>B</strong>를 <strong>A의 Mother Volume</strong>이라고 하고, <strong>A</strong>를 <strong>B의 Daughter Volume</strong>이라고 합니다.</p><p>위 사항에서 단 하나 예외가 존재하는데, 그것이 바로 World 입니다. <strong>World는 Mother Volume을 가지지 않는 유일한 지오메트리</strong>로, 모든 지오메트리 계층에 있어 최상위에 존재하게 됩니다.</p><p>Geant4에서는 어떤 지오메트리의 위치를 참조할 때, 그 지오메트리의 <strong>Mother Volume의 좌표계를 기준</strong>으로 위치를 가져옵니다. 예를 들어 다음 그림과 같은 경우를 살펴봅시다.</p><p><picture><source srcset=/doc_g4noqasked/chap2_geometry/g4-noqasked-006-phyvol/01_mothervol_hub7e12b6689d3da40b2e5f6787394f660_15267_994x993_resize_q75_h2_box_3.webp type=image/webp><img class=img-fluid src=/doc_g4noqasked/chap2_geometry/g4-noqasked-006-phyvol/01_mothervol.d41ecac6b65592a7619e9d883454a60b.png alt=01_mothervol loading=lazy height=993 width=994></picture></p><p>이 그림에서 지오메트리 계층도는 다음과 같을 것입니다.</p><pre class=mermaid>graph TD
World --- A --- B
World --- C</pre><p>여기서 <font color=red><b>A</b></font>의 위치는 A의 Mother Volume인 <strong>World를 기준</strong>으로 판단합니다. (4, 4)에 A가 있다고 보는 것이지요.</p><p><font color=green><b>C</b></font>의 위치도 C의 Mother Volume인 <strong>World를 기준</strong>으로 판단합니다. C는 (-3, 4)에 위치하는 것이 되겠네요.</p><p><font color=blue><b>B</b></font>의 위치는 B의 Mother Volume인 <font color=red><b>A</b></font>를 기준으로 판단합니다. 여기서 <strong>World를 기준으로 하지 않음에 주의</strong>하세요. 즉 <font color=red><b>A의 원점</b></font>을 기준으로 <font color=blue><b>B의 위치는 (2, 1)</b></font>이 됩니다.</p><p>B가 World를 기준으로 어디에 위치하였는지를 판단하려면, Mother Volume이 World가 될 때까지 자신의 위치에 Mother Volume의 위치를 순차적으로 더해나가면 됩니다. A에서의 B의 위치는 (2, 1)이고, World에서의 A의 위치가 (4, 4)이므로, 이를 더하면 World에서의 B의 위치가 (6, 5)임을 알 수 있는 것이지요.</p><h3 id=copy-number>Copy Number</h3><p>Copy Number란 Geant4에서 지오메트리를 구분하는 데에 사용되는 번호입니다. 상황에 따라 Replica Number라고 부르기도 합니다. Geant4 시뮬레이션 시 모든 지오메트리는 예외없이 Copy Number를 가지고 있습니다.</p><p>지오메트리를 서로 구분하는 데에 사용한다고 했습니다만, 중복되는 번호를 부여한다고 해서 문제가 생기는 것은 아닙니다. 사실 <strong>대부분의 지오메트리에 대해서는 그냥 아무 생각없이 0으로 설정하여 사용</strong>해도 괜찮습니다. Copy Number에 관심을 가져야 하는 경우는 여러가지 있지만, 이 시리즈에서는 <strong>스코어링 관점</strong>에서만 간단하게 설명을 하도록 하겠습니다.</p><p>예를 들어 어떤 지오메트리의 흡수선량을 계산하고자 Geant4 시뮬레이션을 돌린다고 가정해봅시다. 그런데 흡수선량의 평가가 필요한 지오메트리가 여러 개라면 각각의 흡수선량을 따로따로 기록하고 관리해야 할 것입니다. 이 때 <strong>흡수선량이라는 값</strong>을 따로따로 보관하기 위한 <font color=red><b>사물함 번호</b></font>에 해당하는 것이 바로 <font color=red><b>Copy Number</b></font>입니다. 우선은 이 정도로만 설명해두고, 나중에 스코어링 파트에서 자세히 다루도록 하지요.</p><h3 id=배치할-때의-주의사항>배치할 때의 주의사항</h3><p>지오메트리를 배치할 때 반드시 지켜야하는 주의사항이 있습니다.</p><ul><li>Daughter Volume은 반드시 Mother Volume 내에 포함되는 형태여야 하며, Mother Volume 밖까지 빠져나와서 미포함된 영역이 있어서는 안됨</li><li>동일한 Mother Volume을 가지는 지오메트리끼리 서로 겹쳐지는 영역이 있어서는 안됨</li></ul><p>간단히 말해, 하위계층의 지오메트리는 상위계층인 Mother Volume 내에 쏙 들어가야하고, 같은 계층의 지오메트리끼리는 겹치지 않아야 한다는 것입니다.</p><p><strong>다만 지오메트리의 면, 선, 점끼리만 맞닿는 것은 괜찮습니다</strong>.</p><hr><h2 id=physical-volume의-종류>Physical Volume의 종류</h2><p>Geant4에서는 지오메트리를 배치하는 여러가지 방법을 제공합니다.</p><ul><li><p>G4PVPlacement</p><p>한 번에 하나의 지오메트리를 배치하는 방법입니다. 가장 간단하고 자주 사용되는 방법입니다.</p></li><li><p>G4PVReplica</p><p>동일한 지오메트리를 반복적으로 놓아야 할 때 사용하기 좋은 클래스입니다.</p></li><li><p>G4PVParameterised</p><p>유사한 지오메트리를 반복적으로 놓아야 할 때 사용하기 좋은 클래스입니다. Copy Number를 일종의 매개변수로 사용하여, 각 지오메트리의 위치, Solid, 매질 등 여러 조건을 바꾸며 배치할 수 있습니다.</p></li><li><p>G4PVDivision</p><p>어떤 지오메트리를 축방향(X, Y, Z, 직경, 중심각)에 따라 절단한 지오메트리를 놓아야 할 때 사용하기 좋은 클래스입니다.</p></li></ul><p>이 외에도 몇 종류 더 있으며, Geant4에서 제공하고 있는 <a href=https://geant4.kek.jp/Reference/ target=_blank rel="noopener noreferrer">Geant4 Doxygen</a>에서 G4VPhysicalVolume 클래스의 레퍼런스 페이지(<a href=https://geant4.kek.jp/Reference/10.07.p01/classG4VPhysicalVolume.html target=_blank rel="noopener noreferrer">10.7.p01 버전</a>)에 들어가면 상속받은 클래스 목록(<em>Inheritance diagram for G4VPhysicalVolume</em>) 부분을 통해 확인할 수 있습니다.</p><p>이 시리즈에서는 G4PVPlacement 클래스 한 가지만 설명할 것입니다.</p><hr><h2 id=g4pvplacement>G4PVPlacement</h2><p>G4PVPlacement 클래스는 Logical Volume 한 개를 배치하는 데에 사용하는 클래스입니다. 생성자는 총 4가지 입니다만, 먼저 두 가지만 살펴보겠습니다.</p><h3 id=생성자>생성자</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=ln>1</span><span class=cl><span class=n>G4PVPlacement</span> <span class=p>(</span><span class=n>G4RotationMatrix</span> <span class=o>*</span><span class=n>pRot</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>2</span><span class=cl>               <span class=k>const</span> <span class=n>G4ThreeVector</span> <span class=o>&amp;</span><span class=n>tlate</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>3</span><span class=cl>               <span class=n>G4LogicalVolume</span> <span class=o>*</span><span class=n>pCurrentLogical</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>4</span><span class=cl>               <span class=k>const</span> <span class=n>G4String</span> <span class=o>&amp;</span><span class=n>pName</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>5</span><span class=cl>               <span class=n>G4LogicalVolume</span> <span class=o>*</span><span class=n>pMotherLogical</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>6</span><span class=cl>               <span class=n>G4bool</span> <span class=n>pMany</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>7</span><span class=cl>               <span class=n>G4int</span> <span class=n>pCopyNo</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>8</span><span class=cl>               <span class=n>G4bool</span> <span class=n>pSurfChk</span><span class=o>=</span><span class=nb>false</span><span class=p>);</span>
</span></span></code></pre></div><ul><li>pRot: G4RotationMatrix 객체의 포인터. 지오메트리를 배치할 때 회전에 대한 정보를 입력하는 데에 사용</li><li>tlate: G4ThreeVector 객체. 지오메트리의 위치에 대한 정보를 입력하는 데에 사용</li><li>pCurrentLogical: G4LogicalVolume 객체의 포인터. 앞서 정의한 Logical Volume을 넣음</li><li>pName: Physical Volume의 이름. 자유롭게 적으면 됨. 다만, 다른 Physical Volume과 겹치지 않게끔 고유의 이름을 권장. Solid 및 Logical Volume의 이름과는 동일해도 상관없음</li><li>pMotherLogical: G4LogicalVolume 객체의 포인터. 이 지오메트리의 Mother Volume이 될 지오메트리의 Logical Volume을 넣음</li><li><em>pMany: <strong>무조건 false로 쓰면 되는 인자</strong>. Geant4에서 아직 구현되지 않은 기능임. 어떤 값을 넣어도 기능하지 않지만, 대부분의 예제 코드에서는 false로 입력하는 편</em></li><li>pCopyNo: Physical Volume의 Copy Number. <strong>정수값</strong>으로 입력하며, 별다른 목적이 없을 경우 대개 <strong>0</strong>을 부여하는 편</li><li><em>pSurfChk: <strong>입력하지 않아도 되는 인자</strong>. 지오메트리 간 겹침 검사를 수행할 지의 여부를 설정하는 데에 사용. 기본 값은 false</em></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=ln>1</span><span class=cl><span class=n>G4PVPlacement</span> <span class=p>(</span><span class=k>const</span> <span class=n>G4Transform3D</span> <span class=o>&amp;</span><span class=n>Transform3D</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>2</span><span class=cl>               <span class=n>G4LogicalVolume</span> <span class=o>*</span><span class=n>pCurrentLogical</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>3</span><span class=cl>               <span class=k>const</span> <span class=n>G4String</span> <span class=o>&amp;</span><span class=n>pName</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>4</span><span class=cl>               <span class=n>G4LogicalVolume</span> <span class=o>*</span><span class=n>pMotherLogical</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>5</span><span class=cl>               <span class=n>G4bool</span> <span class=n>pMany</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>6</span><span class=cl>               <span class=n>G4int</span> <span class=n>pCopyNo</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>7</span><span class=cl>               <span class=n>G4bool</span> <span class=n>pSurfChk</span><span class=o>=</span><span class=nb>false</span><span class=p>);</span>
</span></span></code></pre></div><ul><li>Transform3D: G4Transform3D 객체. 지오메트리를 배치할 때 평행이동 및 회전에 대한 정보를 입력하는 데에 사용</li><li>pCurrentLogical: G4LogicalVolume 객체의 포인터. 앞서 정의한 Logical Volume을 넣음</li><li>pName: Physical Volume의 이름. 자유롭게 적으면 됨. 다만, 다른 Physical Volume과 겹치지 않게끔 고유의 이름을 권장. Solid 및 Logical Volume의 이름과는 동일해도 상관없음</li><li>pMotherLogical: G4LogicalVolume 객체의 포인터. 이 지오메트리의 Mother Volume이 될 지오메트리의 Logical Volume을 넣음</li><li><em>pMany: <strong>무조건 false로 쓰면 되는 인자</strong>. Geant4에서 아직 구현되지 않은 기능임. 어떤 값을 넣어도 기능하지 않지만, 대부분의 예제 코드에서는 false로 입력하는 편</em></li><li>pCopyNo: Physical Volume의 Copy Number. <strong>정수값</strong>으로 입력하며, 별다른 목적이 없을 경우 대개 <strong>0</strong>을 부여하는 편</li><li><em>pSurfChk: <strong>입력하지 않아도 되는 인자</strong>. 지오메트리 간 겹침 검사를 수행할 지의 여부를 설정하는 데에 사용. 기본 값은 false</em></li></ul><p>이 두 가지 생성자는 거의 비슷하지만, <strong>위치/회전에 대한 정보를 입력하는 방식</strong>이 다릅니다. 첫번째 생성자는 회전행렬(G4RotationMatrix)과 위치에 해당하는 벡터(G4ThreeVector)를 입력하고, 두번째 생성자는 회전과 평행이동을 묶어서 다루는 선형변환(G4Transform3D)을 입력하게 되어있지요.</p><p>중요한 점은 입력하는 방식만 다른 것이 아니라, <font color=red><b>배치하는 방식 자체가 근본적으로 다르다</b></font>는 데에 있습니다. 첫번째 생성자는 Mother Volume의 좌표계를 회전시킨 뒤 평행이동을 하는 방식이고, 두번째 생성자는 배치되는 자기자신의 좌표계가 평행이동한 뒤 그자리에서 회전하는 방식입니다.</p><br><p>말로 설명하면 어려우니, 실제 예시를 통해 살펴봅시다.</p><p>회전을 명확하게 확인하기 위해, 기존의 정육면체에서 X축 방향의 길이를 두배로 늘렸습니다. 10 cm × 5 cm × 5 cm의 G4Box형태 Solid를 정의하고, 물을 채워 Logical Volume까지 정의한 상태입니다. 코드로는 다음과 같습니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=ln>1</span><span class=cl><span class=k>auto</span> <span class=n>phantomXSize</span> <span class=o>=</span> <span class=mf>10.</span> <span class=o>*</span> <span class=n>cm</span><span class=p>;</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=k>auto</span> <span class=n>phantomYSize</span> <span class=o>=</span> <span class=mf>5.</span> <span class=o>*</span> <span class=n>cm</span><span class=p>;</span>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=k>auto</span> <span class=n>phantomZSize</span> <span class=o>=</span> <span class=mf>5.</span> <span class=o>*</span> <span class=n>cm</span><span class=p>;</span>
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=k>auto</span> <span class=n>phantomSol</span> <span class=o>=</span> <span class=k>new</span> <span class=n>G4Box</span><span class=p>(</span><span class=s>&#34;phantom&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>5</span><span class=cl>                            <span class=mf>.5</span> <span class=o>*</span> <span class=n>phantomXSize</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>6</span><span class=cl>                            <span class=mf>.5</span> <span class=o>*</span> <span class=n>phantomYSize</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>7</span><span class=cl>                            <span class=mf>.5</span> <span class=o>*</span> <span class=n>phantomZSize</span><span class=p>);</span>
</span></span><span class=line><span class=ln>8</span><span class=cl><span class=k>auto</span> <span class=n>phantomLog</span> <span class=o>=</span> <span class=k>new</span> <span class=n>G4LogicalVolume</span><span class=p>(</span><span class=n>phantomSol</span><span class=p>,</span> <span class=n>matWater</span><span class=p>,</span> <span class=s>&#34;phantom&#34;</span><span class=p>);</span>
</span></span></code></pre></div><p>이제 이 지오메트리를 <b>(0, 0, 20 cm) 위치</b>에 <b>Y축을 기준으로 30° 회전</b>시켜서 배치해보도록 하겠습니다.</p><h4 id=g4rotationmatrix--g4threevector-이용>G4RotationMatrix & G4ThreeVector 이용</h4><p>첫번째 생성자를 이용하여 다음과 같이 코드를 작성해 보았습니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=ln>1</span><span class=cl><span class=k>auto</span> <span class=n>phantomPos</span> <span class=o>=</span> <span class=n>G4ThreeVector</span><span class=p>(</span><span class=mf>0.</span><span class=p>,</span> <span class=mf>0.</span><span class=p>,</span> <span class=mf>20.</span> <span class=o>*</span> <span class=n>cm</span><span class=p>);</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=k>auto</span> <span class=n>phantomRot</span> <span class=o>=</span> <span class=k>new</span> <span class=n>G4RotationMatrix</span><span class=p>(</span><span class=n>G4ThreeVector</span><span class=p>(</span><span class=mf>0.</span><span class=p>,</span> <span class=mf>1.</span><span class=p>,</span> <span class=mf>0.</span><span class=p>),</span> <span class=mf>30.</span> <span class=o>*</span> <span class=n>deg</span><span class=p>);</span>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=k>new</span> <span class=nf>G4PVPlacement</span><span class=p>(</span><span class=n>phantomRot</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>4</span><span class=cl>                  <span class=n>phantomPos</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>5</span><span class=cl>                  <span class=n>phantomLog</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>6</span><span class=cl>                  <span class=s>&#34;phantom&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>7</span><span class=cl>                  <span class=n>worldLog</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>8</span><span class=cl>                  <span class=nb>false</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>9</span><span class=cl>                  <span class=mi>0</span><span class=p>);</span>
</span></span></code></pre></div><p>결과는 다음과 같습니다. +Y축 방향에서 아래로 내려다본 그림입니다.</p><p><picture><source srcset=/doc_g4noqasked/chap2_geometry/g4-noqasked-006-phyvol/02_motherframe_hu438d70de5f09db55f67c04adb1db4d90_84171_1302x1012_resize_q75_h2_box_3.webp type=image/webp><img class=img-fluid src=/doc_g4noqasked/chap2_geometry/g4-noqasked-006-phyvol/02_motherframe.6f79d652f98586a01957710982f2fa4d.png alt=02_motherframe loading=lazy height=1012 width=1302></picture></p><p>이상한 점을 찾으셨나요? 축을 기준으로 회전을 시키면 축을 위에서 봤을때 <strong>반시계방향으로 회전</strong>해야 하는데 반대방향인 시계방향으로 돌아갔습니다. 이유는 이 생성자가 <b>Mother Volume의 좌표계를 회전시킨 뒤 평행이동을 하는 방식으로 지오메트리를 배치</b>하기 때문입니다. 다음의 그림을 보면 좀 더 이해가 쉬울 것입니다.</p><p><picture><source srcset=/doc_g4noqasked/chap2_geometry/g4-noqasked-006-phyvol/03_motherframe_hu707c94f630240fb7a670e813bcd6a0db_7590915_1728x1432_resize_q75_h2_box_1.webp type=image/webp><img class=img-fluid src=/doc_g4noqasked/chap2_geometry/g4-noqasked-006-phyvol/03_motherframe.a4baf50bfa6edb309aa0a4440a3edebe.gif alt=03_motherframe loading=lazy height=1432 width=1728></picture></p><p>보시다시피 좌표계 자체가 먼저 돌아간 뒤, 돌아간 좌표계에 따라 지오메트리를 이동시킵니다. (맨 마지막에 시계방향으로 돌린 것은 그냥 보기 편하려고 원래 방향으로 되돌린 것일 뿐이므로 배치와는 무관합니다) 이런 방식을 취하기 때문에, 일반적으로 생각한 방식과 반대로 회전하는 것처럼 보이게 됩니다.</p><h4 id=g4transform3d-이용>G4Transform3D 이용</h4><p>이번에는 두번째 생성자를 이용하여 다음과 같이 코드를 작성해 보았습니다.</p><div class="alert alert-warning d-flex" role=alert><div class=flex-shrink-0><svg aria-hidden="true" class="bi bi-exclamation-circle-fillbi bi-exclamation-circle-fill hi-svg-inline alert-icon me-2" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 8A8 8 0 110 8a8 8 0 0116 0zM8 4a.905.905.0 00-.9.995l.35 3.507a.552.552.0 001.1.0l.35-3.507A.905.905.0 008 4zm.002 6a1 1 0 100 2 1 1 0 000-2z"/></svg></div><div class=alert-content>G4Transform3D의 생성자에는 <b>G4RotationMatrix의 객체 자체</b>가 인자로 사용됩니다. G4RotationMatrix 객체의 <b>포인터가 아님에 주의</b>하세요.</div></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=ln>1</span><span class=cl><span class=k>auto</span> <span class=n>phantomPos</span> <span class=o>=</span> <span class=n>G4ThreeVector</span><span class=p>(</span><span class=mf>0.</span><span class=p>,</span> <span class=mf>0.</span><span class=p>,</span> <span class=mf>20.</span> <span class=o>*</span> <span class=n>cm</span><span class=p>);</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=k>auto</span> <span class=n>phantomRot</span> <span class=o>=</span> <span class=n>G4RotationMatrix</span><span class=p>(</span><span class=n>G4ThreeVector</span><span class=p>(</span><span class=mf>0.</span><span class=p>,</span> <span class=mf>1.</span><span class=p>,</span> <span class=mf>0.</span><span class=p>),</span> <span class=mf>30.</span> <span class=o>*</span> <span class=n>deg</span><span class=p>);</span>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=k>new</span> <span class=nf>G4PVPlacement</span><span class=p>(</span><span class=n>G4Transform3D</span><span class=p>(</span><span class=n>phantomRot</span><span class=p>,</span> <span class=n>phantomPos</span><span class=p>),</span> 
</span></span><span class=line><span class=ln>4</span><span class=cl>                  <span class=n>phantomLog</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>5</span><span class=cl>                  <span class=s>&#34;phantom&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>                  <span class=n>worldLog</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>7</span><span class=cl>                  <span class=nb>false</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>8</span><span class=cl>                  <span class=mi>0</span><span class=p>);</span>
</span></span></code></pre></div><p>결과는 다음과 같습니다. 마찬가지로 +Y축 방향에서 아래로 내려다본 그림입니다.</p><p><picture><source srcset=/doc_g4noqasked/chap2_geometry/g4-noqasked-006-phyvol/04_g4transform3d_hu452bc544f39a1c7016f783d13823acfb_70521_1302x1012_resize_q75_h2_box_3.webp type=image/webp><img class=img-fluid src=/doc_g4noqasked/chap2_geometry/g4-noqasked-006-phyvol/04_g4transform3d.cecc7ef36dcf59ff733f43b6e8adcb6c.png alt=04_g4transform3d loading=lazy height=1012 width=1302></picture></p><p>이번에는 일반적인 예상과 같이 <strong>반시계방향으로 회전한 상태로 배치</strong>가 되었습니다. 이 생성자는 자기 자신인 phantom 지오메트리의 좌표계가 평행이동한 뒤 그 자리에서 회전하는 방식을 취합니다.</p><p>그래서 G4Transform3D 부분을 &ldquo;<b>평행이동변환을 한 뒤, 이어서 회전변환을 가한다</b>&ldquo;의 의미를 갖게끔 다음과 같이 입력하여도 동일한 결과를 보여줍니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=ln>1</span><span class=cl><span class=k>auto</span> <span class=n>phantomPos</span> <span class=o>=</span> <span class=n>G4ThreeVector</span><span class=p>(</span><span class=mf>0.</span><span class=p>,</span> <span class=mf>0.</span><span class=p>,</span> <span class=mf>20.</span> <span class=o>*</span> <span class=n>cm</span><span class=p>);</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=k>auto</span> <span class=n>phantomRot</span> <span class=o>=</span> <span class=n>G4RotationMatrix</span><span class=p>(</span><span class=n>G4ThreeVector</span><span class=p>(</span><span class=mf>0.</span><span class=p>,</span> <span class=mf>1.</span><span class=p>,</span> <span class=mf>0.</span><span class=p>),</span> <span class=mf>30.</span> <span class=o>*</span> <span class=n>deg</span><span class=p>);</span>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=k>new</span> <span class=nf>G4PVPlacement</span><span class=p>(</span><span class=n>G4Translate3D</span><span class=p>(</span><span class=n>phantomPos</span><span class=p>)</span> <span class=o>*</span> <span class=n>G4Rotate3D</span><span class=p>(</span><span class=n>phantomRot</span><span class=p>),</span> 
</span></span><span class=line><span class=ln>4</span><span class=cl>                  <span class=n>phantomLog</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>5</span><span class=cl>                  <span class=s>&#34;phantom&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>6</span><span class=cl>                  <span class=n>worldLog</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>7</span><span class=cl>                  <span class=nb>false</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>8</span><span class=cl>                  <span class=mi>0</span><span class=p>);</span>
</span></span></code></pre></div><p>혹은 &ldquo;<b>Z축으로 30 cm 평행이동을 한 뒤, Y축을 기준으로 30° 회전</b>&ldquo;의 의미를 갖도록 다음과 같이 입력해도 같은 결과가 나오지요.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=ln>1</span><span class=cl><span class=k>new</span> <span class=nf>G4PVPlacement</span><span class=p>(</span><span class=n>G4TranslateZ3D</span><span class=p>(</span><span class=mf>20.</span> <span class=o>*</span> <span class=n>cm</span><span class=p>)</span> <span class=o>*</span> <span class=n>G4RotateY3D</span><span class=p>(</span><span class=mf>30.</span> <span class=o>*</span> <span class=n>deg</span><span class=p>),</span> 
</span></span><span class=line><span class=ln>2</span><span class=cl>                  <span class=n>phantomLog</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>3</span><span class=cl>                  <span class=s>&#34;phantom&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>4</span><span class=cl>                  <span class=n>worldLog</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>5</span><span class=cl>                  <span class=nb>false</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>6</span><span class=cl>                  <span class=mi>0</span><span class=p>);</span>
</span></span></code></pre></div><p>배치되는 방식을 그림을 통해 살펴보면 다음과 같습니다.</p><p><picture><source srcset=/doc_g4noqasked/chap2_geometry/g4-noqasked-006-phyvol/05_g4transform3d_hu54764e1bcb68539f0f9456e30312dc34_975200_1728x1432_resize_q75_h2_box_1.webp type=image/webp><img class=img-fluid src=/doc_g4noqasked/chap2_geometry/g4-noqasked-006-phyvol/05_g4transform3d.e2f399ab02eb85a6d45db9c08f0296bd.gif alt=05_g4transform3d loading=lazy height=1432 width=1728></picture></p><h4 id=회전-후-그-방향으로-이동>회전 후 그 방향으로 이동</h4><p>경우에 따라서는, 회전시킨 뒤 그 방향으로 이동하도록 하고 싶을 때도 있을 것입니다. 예를 들어 원의 둘레를 따라 구조물을 빙 둘러 배치해야 하는 경우처럼 말이죠. 이런 경우에는 <b>두 번째 생성자를 이용하되, 평행이동과 회전의 순서를 바꾸면 됩니다</b>. 말 그대로 &ldquo;<b>회전 후 이동</b>&ldquo;이니까 말이죠. 다만, G4Transform3D 클래스 객체를 생성할 때 평행이동과 회전을 함께 입력하는 식으로 만들게 되면 &ldquo;이동 후 회전"의 방식이 되어버리므로, <b>회전 후 이동을 직접 명시하는 방식으로 입력</b>해야 합니다.</p><p>코드로 작성하면 다음과 같습니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=ln>1</span><span class=cl><span class=k>auto</span> <span class=n>phantomPos</span> <span class=o>=</span> <span class=n>G4ThreeVector</span><span class=p>(</span><span class=mf>0.</span><span class=p>,</span> <span class=mf>0.</span><span class=p>,</span> <span class=mf>20.</span> <span class=o>*</span> <span class=n>cm</span><span class=p>);</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=k>auto</span> <span class=n>phantomRot</span> <span class=o>=</span> <span class=n>G4RotationMatrix</span><span class=p>(</span><span class=n>G4ThreeVector</span><span class=p>(</span><span class=mf>0.</span><span class=p>,</span> <span class=mf>1.</span><span class=p>,</span> <span class=mf>0.</span><span class=p>),</span> <span class=mf>30.</span> <span class=o>*</span> <span class=n>deg</span><span class=p>);</span>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=k>new</span> <span class=nf>G4PVPlacement</span><span class=p>(</span><span class=n>G4Rotate3D</span><span class=p>(</span><span class=n>phantomRot</span><span class=p>)</span> <span class=o>*</span> <span class=n>G4Translate3D</span><span class=p>(</span><span class=n>phantomPos</span><span class=p>),</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>                  <span class=n>phantomLog</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>5</span><span class=cl>                  <span class=s>&#34;phantom&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>6</span><span class=cl>                  <span class=n>worldLog</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>7</span><span class=cl>                  <span class=nb>false</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>8</span><span class=cl>                  <span class=mi>0</span><span class=p>);</span>
</span></span></code></pre></div><p>혹은 다음과 같이 입력해도 동일한 결과가 나올 것입니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=ln>1</span><span class=cl><span class=k>new</span> <span class=nf>G4PVPlacement</span><span class=p>(</span><span class=n>G4RotateY3D</span><span class=p>(</span><span class=mf>30.</span> <span class=o>*</span> <span class=n>deg</span><span class=p>)</span> <span class=o>*</span> <span class=n>G4TranslateZ3D</span><span class=p>(</span><span class=mf>20.</span> <span class=o>*</span> <span class=n>cm</span><span class=p>),</span> 
</span></span><span class=line><span class=ln>2</span><span class=cl>                  <span class=n>phantomLog</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>3</span><span class=cl>                  <span class=s>&#34;phantom&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>4</span><span class=cl>                  <span class=n>worldLog</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>5</span><span class=cl>                  <span class=nb>false</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>6</span><span class=cl>                  <span class=mi>0</span><span class=p>);</span>
</span></span></code></pre></div><p>결과는 다음과 같습니다. 마찬가지로 +Y축 방향에서 아래로 내려다본 그림입니다.</p><p><picture><source srcset=/doc_g4noqasked/chap2_geometry/g4-noqasked-006-phyvol/06_rotatethentranslate_hudd47941cd2f8da2ceeb04a99c4a5c176_71908_1302x1012_resize_q75_h2_box_3.webp type=image/webp><img class=img-fluid src=/doc_g4noqasked/chap2_geometry/g4-noqasked-006-phyvol/06_rotatethentranslate.c8ccb12f5aa5516677d2dc51bca4ad1f.png alt=06_rotatethentranslate loading=lazy height=1012 width=1302></picture></p><p>위치 자체가 (0, 0, 20 cm)가 아니라 좀 더 왼쪽 위로 이동한 것을 볼 수 있습니다. 이렇게 배치할때 배치되는 과정을 그림으로 보면 다음과 같습니다.</p><p><picture><source srcset=/doc_g4noqasked/chap2_geometry/g4-noqasked-006-phyvol/07_rotatethentranslate_hud75b6996e6cf60ec6613343cf6adac2b_1248686_1728x1432_resize_q75_h2_box_1.webp type=image/webp><img class=img-fluid src=/doc_g4noqasked/chap2_geometry/g4-noqasked-006-phyvol/07_rotatethentranslate.4a8ee631a733654051f3e6aa997d8bd5.gif alt=07_rotatethentranslate loading=lazy height=1432 width=1728></picture></p><p>이 세 가지 배치방식만 잘 이해하시면 원하는 방식으로 회전/이동 시키는 데에 무리없이 적용할 수 있을 것입니다.</p><h3 id=나머지-두-가지-생성자>나머지 두 가지 생성자</h3><p>아까 생성자가 총 4개라고 했었으니, 이제 남은 2개도 살펴봅시다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=ln>1</span><span class=cl><span class=n>G4PVPlacement</span> <span class=p>(</span><span class=n>G4RotationMatrix</span> <span class=o>*</span><span class=n>pRot</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>2</span><span class=cl>               <span class=k>const</span> <span class=n>G4ThreeVector</span> <span class=o>&amp;</span><span class=n>tlate</span><span class=p>,</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>               <span class=k>const</span> <span class=n>G4String</span> <span class=o>&amp;</span><span class=n>pName</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>4</span><span class=cl>               <span class=n>G4LogicalVolume</span> <span class=o>*</span><span class=n>pLogical</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>5</span><span class=cl>               <span class=n>G4VPhysicalVolume</span> <span class=o>*</span><span class=n>pMother</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>6</span><span class=cl>               <span class=n>G4bool</span> <span class=n>pMany</span><span class=p>,</span>
</span></span><span class=line><span class=ln>7</span><span class=cl>               <span class=n>G4int</span> <span class=n>pCopyNo</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>8</span><span class=cl>               <span class=n>G4bool</span> <span class=n>pSurfChk</span><span class=o>=</span><span class=nb>false</span><span class=p>);</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=ln>1</span><span class=cl><span class=n>G4PVPlacement</span> <span class=p>(</span><span class=k>const</span> <span class=n>G4Transform3D</span> <span class=o>&amp;</span><span class=n>Transform3D</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>2</span><span class=cl>               <span class=k>const</span> <span class=n>G4String</span> <span class=o>&amp;</span><span class=n>pName</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>3</span><span class=cl>               <span class=n>G4LogicalVolume</span> <span class=o>*</span><span class=n>pLogical</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>4</span><span class=cl>               <span class=n>G4VPhysicalVolume</span> <span class=o>*</span><span class=n>pMother</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>5</span><span class=cl>               <span class=n>G4bool</span> <span class=n>pMany</span><span class=p>,</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>               <span class=n>G4int</span> <span class=n>pCopyNo</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>7</span><span class=cl>               <span class=n>G4bool</span> <span class=n>pSurfChk</span><span class=o>=</span><span class=nb>false</span><span class=p>);</span>
</span></span></code></pre></div><p>앞서 설명했던 두 가지 생성자와 거의 동일하고, 다음의 두 부분만 차이가 있습니다.</p><ul><li>인자의 입력 순서가 약간 바뀜(Physical Volume의 이름)</li><li>Mother Volume을 입력할 때 Mother Volume의 Logical Volume 대신 Physical Volume으로 입력</li></ul><p>기능은 앞서 설명했던 두 가지 생성자와 <strong>완전히 동일</strong>합니다. 그래서 이 둘은 거의 사용할 일이 없습니다.</p><hr><h2 id=정리>정리</h2><p>이번 글에서는 회전과 이동을 통해 원하는 위치에 원하는 각도로 지오메트리를 배치하는 법을 알아보았습니다. 이로써 여러분은 Geant4 시뮬레이션을 돌리는 데에 필수요소 중 하나인 <strong>지오메트리를 정의하는 법</strong>을 다 배우셨습니다.</p><p>다음 글부터는 선원항을 정의하는 법에 대해 알아보도록 하겠습니다.</p></div><div class="hb-content-panel-wrapper position-sticky hb-module d-flex justify-content-center"><div class="hb-content-panel d-flex shadow w-auto rounded-5 bg-body"><div class=hb-content-panel-item><a href=#content-comments class="btn btn-link text-body" title=댓글 role=button><svg aria-hidden="true" class="bi bi-chat-dotsbi bi-chat-dots hi-svg-inline" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M5 8A1 1 0 113 8a1 1 0 012 0zm4 0A1 1 0 117 8a1 1 0 012 0zm3 1a1 1 0 100-2 1 1 0 000 2z"/><path d="m2.165 15.803.02-.004c1.83-.363 2.948-.842 3.468-1.105A9.06 9.06.0 008 15c4.418.0 8-3.134 8-7s-3.582-7-8-7-8 3.134-8 7c0 1.76.743 3.37 1.97 4.6a10.437 10.437.0 01-.524 2.318l-.003.011a10.722 10.722.0 01-.244.637c-.079.186.074.394.273.362a21.673 21.673.0 00.693-.125zm.8-3.108a1 1 0 00-.287-.801C1.618 10.83 1 9.468 1 8c0-3.192 3.004-6 7-6s7 2.808 7 6c0 3.193-3.004 6-7 6a8.06 8.06.0 01-2.088-.272 1 1 0 00-.711.074c-.387.196-1.24.57-2.634.893a10.97 10.97.0 00.398-2z"/></svg></a></div></div></div><ul class="hb-docs-doc-nav nav hb-module justify-content-between"><li class="nav-item my-1"><a class="nav-link p-0 d-flex align-items-center" href=/doc_g4noqasked/chap2_geometry/g4-noqasked-005-clhepclasses/><svg aria-hidden="true" class="bi bi-arrow-left-circlebi bi-arrow-left-circle hi-svg-inline me-2" fill="currentcolor" height="1.5em" viewBox="0 0 16 16" width="1.5em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M1 8a7 7 0 1014 0A7 7 0 001 8zm15 0A8 8 0 110 8a8 8 0 0116 0zm-4.5-.5a.5.5.0 010 1H5.707l2.147 2.146a.5.5.0 01-.708.708l-3-3a.5.5.0 010-.708l3-3a.5.5.0 11.708.708L5.707 7.5H11.5z"/></svg>위치, 회전을 정의하는 법</a></li></ul><div id=content-comments class=hb-docs-doc-comments><div class=giscus></div></div></div></div></div></div></div><footer class="hb-footer pt-4 pt-md-5 pb-2 pb-md-3 bg-body-tertiary"><div class="container-fluid container-lg px-4 px-md-3 text-body-secondary"><div class=row><div class="hb-footer-site-info col mb-2 text-center"><div class=h5>EvaNOTE</div><ul class="list-unstyled small mb-2"><li class=mt-2>지식과 경험의 기록</li><li class=mt-2>Copyright © 2020-2023 Evan Kim. This work is licensed under <a href=https://creativecommons.org/licenses/by-nc-nd/4.0/ target=_blank rel="noopener noreferrer">CC BY NC ND 4.0</a>.</li><li class=mt-2>Built with ❤️ from <a href=https://gohugo.io/ target=_blank rel=external title=Hugo>Hugo</a>, <a href=https://hugomods.com/ target=_blank rel=external title="Hugo Modules">Hugo Modules</a> and <a href=https://hbstack.dev/ target=_blank rel=external title="HB Framework">HB Framework</a>.</li></ul><div class="hb-footer-socials d-flex mb-2 justify-content-center"><a class="hb-social p-2" href=https://github.com/evandde target=_blank rel="nofollow me" title=GitHub><svg aria-hidden="true" class="hi-svg-inline hb-social-icon" fill="currentcolor" height="1.75em" role="img" style="color:%!s(bool=true)" viewBox="0 0 24 24" width="1.75em" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="hb-social p-2" href=mailto:evandde@gmail.com target=_blank rel="nofollow me" title=Gmail><svg aria-hidden="true" class="hi-svg-inline hb-social-icon" fill="currentcolor" height="1.75em" role="img" style="color:%!s(bool=true)" viewBox="0 0 24 24" width="1.75em" xmlns="http://www.w3.org/2000/svg"><title>Gmail</title><path d="M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636.0 010 19.366V5.457c0-2.023 2.309-3.178 3.927-1.964L5.455 4.64 12 9.548l6.545-4.91 1.528-1.145C21.69 2.28 24 3.434 24 5.457z"/></svg></a></div></div></div></div></footer><script src=/js/hb.2e1007890235750d5d497c09a35f5a3a6dc45fc9bec45c63b44ef0b2a3062722.js integrity="sha256-LhAHiQI1dQ1dSXwJo19aOm3EX8m+xFxjtE7wsqMGJyI=" defer></script>
<script src=https://giscus.app/client.js data-repo=evandde/blog_comment data-repo-id="MDEwOlJlcG9zaXRvcnkzMTIxOTcyMjI=" data-category=Announcements data-category-id=DIC_kwDOEpvAZs4CR8XO data-mapping=pathname data-reactions-enabled=1 data-input-position=top data-theme=preferred_color_scheme data-lang data-loading=lazy data-strict=1 crossorigin=anonymous onload='document.body.dispatchEvent(new Event("giscus-load"))' async></script>
<script type=module>
    import mermaid from "https:\/\/cdn.jsdelivr.net\/npm\/mermaid@latest\/dist\/mermaid.esm.min.mjs";
  </script><script>"serviceWorker"in navigator&&window.addEventListener("DOMContentLoaded",function(){navigator.serviceWorker.register("/sw.js")})</script><script src=/js/search.b4e01b348a37185d7ee4730c30392ce6a7f24f8ac98fe3cc52407c85434543b0.js defer></script></body></html>