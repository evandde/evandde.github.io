# Geant4 무작정 따라하기 - 2. 지오메트리 정의하기 (이론)


Geant4 무작정 따라하기 시리즈의 두번째. 지오메트리를 정의하는 방법에 대해 알아봅니다.

<!--more-->

## Geant4의 지오메트리 개념

### 기본

Geant4에서의 지오메트리 정의 과정은 다음의 세 클래스가 분리하여 담당합니다.

1. Solid (형태): 지오메트리의 **모양**, **크기** 등에 대한 정보를 담당
2. Logical Volume (특성): 지오메트리의 **매질** 등 질적인 특성에 대한 정보를 담당
3. Physical Volume (배치): 지오메트리의 **위치**, **회전**, **소속** 등 배치에 대한 정보를 담당

이 세 가지 클래스가 다음 다이어그램과 같이 유기적으로 연결되어 하나의 지오메트리 객체를 정의하게 됩니다.

{{< mermaid >}}
graph LR
A --> B --> C
A[Solid]
B[Logical Volume]
C[Physical Volume]
{{< /mermaid >}}

1.  모양에 대한 정보를 담은 Solid 객체를 정의.
2. 이 Solid 객체에 매질 정보를 넣어 Logical Volume 객체를 정의.
3. 이 Logical Volume 객체에 위치, 회전, 소속에 대한 정보를 넣어 Physical Volume 객체를 정의.

좀 더 구체적인 예시로 다이어그램을 그려보면 다음과 같습니다.

{{< mermaid >}}
graph LR
A --> B --> C
A[직육면체]
B[물이 담긴 직육면체]
C["(10, 0, 0)"에 위치한 물이 담긴 직육면체]
{{< /mermaid >}}

중요한 부분은, **Physical Volume까지 정의되어야만** 비로소 **시뮬레이션 세계에 존재**하게 된다는 점입니다.

즉, Solid만 정의된 상태인 "직육면체"나, Logical Volume까지만 정의된 "물이 담긴 직육면체"는 아직 시뮬레이션 세계에 존재하지 않는 **개념적인 존재일 뿐**입니다. 이를 <u>**Physical Volume으로서 "(10, 0, 0)에 놓겠다"는 부분이 정의되어야 그제서야 시뮬레이션 세계에 존재**</u>하게 됩니다.

### 응용

Geant4에서는 지오메트리를 **Solid(형태)**, **Logical Volume(특성)**, <b>Physical Volume(배치)</b>의 세 단계로 나누어 관리하기 때문에, 유사한 지오메트리를 여러개 배치하여야 할 때 이전에 만들어둔 객체를 재사용하여 효율적인 코딩이 가능합니다. Logical Volume을 재사용하는 다음의 다이어그램을 살펴봅시다.

{{< mermaid >}}
graph LR
A --> B --> C & D & E
A[직육면체]
B[물이 담긴 직육면체]
C["(0, 0, 0)"에 위치한 물이 담긴 직육면체]
D["(10, 0, 0)"에 위치한 물이 담긴 직육면체]
E["(20, 0, 0)"에 위치한 물이 담긴 직육면체]
{{< /mermaid >}}

"물이 담긴 직육면체" 라는 Logical Volume을 여러 위치에 배치해야 하는 경우, 위 다이어그램과 같이 Physical Volume만을 변경하며 여러 번 정의해줄 수 있습니다.

혹은, 모양이 동일한데 매질이 달라져야 하는 경우에는 다음과 같이 Solid 객체를 재사용하여 구성할 수도 있습니다.

{{< mermaid >}}
graph LR
A --> B & C
B --> D & E
C --> F
A[직육면체]
B[물이 담긴 직육면체]
C[공기가 담긴 직육면체]
D["(0, 0, 0)"에 위치한 물이 담긴 직육면체]
E["(10, 0, 0)"에 위치한 물이 담긴 직육면체]
F["(20, 0, 0)"에 위치한 공기가 담긴 직육면체]
{{< /mermaid >}}

---

다음 글에서는 이 내용을 바탕으로 실제 코드를 작성해보겠습니다.
