<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>PowerShell | EvaNote</title>
    <link>https://evandde.github.io/tags/powershell/</link>
      <atom:link href="https://evandde.github.io/tags/powershell/index.xml" rel="self" type="application/rss+xml" />
    <description>PowerShell</description>
    <generator>Wowchemy (https://wowchemy.com)</generator><language>ko-kr</language><copyright>© 2020–2021 Evan Kim</copyright><lastBuildDate>Fri, 25 Sep 2020 08:55:52 +0900</lastBuildDate>
    <image>
      <url>https://evandde.github.io/media/icon_hu8e7e87b14a52eedd9109bf1b224bd29e_18847_512x512_fill_lanczos_center_3.png</url>
      <title>PowerShell</title>
      <link>https://evandde.github.io/tags/powershell/</link>
    </image>
    
    <item>
      <title>PowerShell에서 git log, diff 출력 시 한글 깨지는 오류 해결</title>
      <link>https://evandde.github.io/powershell-encoding/</link>
      <pubDate>Fri, 25 Sep 2020 08:55:52 +0900</pubDate>
      <guid>https://evandde.github.io/powershell-encoding/</guid>
      <description>&lt;p&gt;PowerShell에서 git log나 git diff 출력 시 인코딩 문제로 인해 글자가 깨져 나오는 경우가 있습니다. 이 문제를 해결하는 방법을 알아봅니다.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;tldr&#34;&gt;TL;DR&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Git 설정을 변경하거나, 혹은 PowerShell 설정을 변경하거나. 둘 중 하나만 해도 고쳐집니다.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;방법 1. Git 설정을 변경&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Git의 출력 설정을 변경합니다. 이 방법은 Git의 설정만을 변경하므로, Git에 한해서만 문제가 해결됩니다. PowerShell은 건드리지 않으므로, 동일한 문제가 다른 프로그램에서도 발생한다면 그 부분은 고쳐지지 않을 것입니다.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;git config --global core.pager &#39;less --raw-control-chars&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;방법 2. PowerShell 설정을 변경&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Powershell에서 환경변수를 설정합니다. 이는 해당 PowerShell창에 한해 일시적으로 문제를 해결합니다.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;$env:LC_ALL=&#39;C.UTF-8&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Powershell을 켤 때 자동실행되는 스크립트에 환경변수를 설정하는 내용을 적습니다. 이는 새로운 PowerShell 창이 켜질때마다 해당 PowerShell 창에 환경변수를 설정하므로, 영구적으로 문제를 해결해줍니다.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;Set-ExecutionPolicy unrestricted
if(!(Test-Path -path $profile)){ New-Item -Type File -Path $profile -Force }
Add-Content -Path $profile -Value &#39;$env:LC_ALL=&#39;&#39;C.UTF-8&#39;&#39;&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;
&lt;h2 id=&#34;버그-설명&#34;&gt;버그 설명&lt;/h2&gt;
&lt;p&gt;PowerShell에서 git log를 출력해보니 다음과 같이 한글이 깨져서 출력되는 일을 겪었습니다.
이 글에서는 이런 문제를 해결하는 방법을 다룹니다.&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;error&#34; srcset=&#34;
               /powershell-encoding/error_hufdf22be8e591394f0a42568a58c0ed27_16086_b9664a7b5d8539ab2fb522dee029690a.png 400w,
               /powershell-encoding/error_hufdf22be8e591394f0a42568a58c0ed27_16086_f0d97a7bff89a893c90dd4bfe0a4b671.png 760w,
               /powershell-encoding/error_hufdf22be8e591394f0a42568a58c0ed27_16086_1200x1200_fit_lanczos_3.png 1200w&#34;
               src=&#34;https://evandde.github.io/powershell-encoding/error_hufdf22be8e591394f0a42568a58c0ed27_16086_b9664a7b5d8539ab2fb522dee029690a.png&#34;
               width=&#34;592&#34;
               height=&#34;138&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;왜-발생하는가&#34;&gt;왜 발생하는가?&lt;/h2&gt;
&lt;p&gt;Git과 PowerShell에서의 인코딩 형식이 호환되지 않아서 그렇습니다.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;해결방법-1-git-설정을-변경&#34;&gt;해결방법 1. Git 설정을 변경&lt;/h2&gt;
&lt;p&gt;첫 번째 방법은 git의 출력형식을 변경해주는 것입니다.
이 방법은 git의 설정만 변경할 뿐, PowerShell은 전혀 건드리지 않는다는 장점이 있습니다.&lt;/p&gt;
&lt;p&gt;PowerShell에서 다음 명령어를 통해 git의 출력 설정을 변경합니다.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;git config --global core.pager &#39;less --raw-control-chars&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;solved_git&#34; srcset=&#34;
               /powershell-encoding/solved_git_hu64357c13934de96543c05c5f070dc987_12539_521def6365e24571de8c34c9ef91eec9.png 400w,
               /powershell-encoding/solved_git_hu64357c13934de96543c05c5f070dc987_12539_321e870c48786c27017403abc8bf36e1.png 760w,
               /powershell-encoding/solved_git_hu64357c13934de96543c05c5f070dc987_12539_1200x1200_fit_lanczos_3.png 1200w&#34;
               src=&#34;https://evandde.github.io/powershell-encoding/solved_git_hu64357c13934de96543c05c5f070dc987_12539_521def6365e24571de8c34c9ef91eec9.png&#34;
               width=&#34;661&#34;
               height=&#34;155&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;참고로 이 세팅을 해제하는 방법은 다음과 같습니다.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;git config --global --unset core.pager
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;
&lt;h2 id=&#34;해결방법-2-powershell-설정을-변경&#34;&gt;해결방법 2. PowerShell 설정을 변경&lt;/h2&gt;
&lt;p&gt;두 번째 방법은 PowerShell에서 인코딩하는 방식을 변경해주는 것입니다.
이 방법은 PowerShell 설정을 변경하는 것이므로, PowerShell에서 사용하는 다른 프로그램에 영향을 줄 수도 있습니다.&lt;/p&gt;
&lt;h3 id=&#34;해당-powershell-윈도우에서만-일시적으로-수정&#34;&gt;해당 PowerShell 윈도우에서만 일시적으로 수정&lt;/h3&gt;
&lt;p&gt;Powershell에서 &lt;code&gt;$env:LC_ALL&lt;/code&gt;이라는 환경변수의 값을 &lt;code&gt;&#39;C.UTF-8&#39;&lt;/code&gt;로 설정해주면 됩니다.&lt;/p&gt;
&lt;div class=&#34;alert alert-warning&#34;&gt;
  &lt;div&gt;
    이 방법은 그 PowerShell창에서만 유효합니다. 새로운 창에서는 문제가 다시 나타날 것입니다.
  &lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;다음 명령어를 입력하여 환경변수를 설정합니다.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;$env:LC_ALL=&#39;C.UTF-8&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;solved_ps&#34; srcset=&#34;
               /powershell-encoding/solved_ps_hua0003c83d795a1caf463a0107814780f_11172_2e5fcd9d08bc5cb7cf1c9f2b5e3e500c.png 400w,
               /powershell-encoding/solved_ps_hua0003c83d795a1caf463a0107814780f_11172_632c3c0ab97810d7e02c1f94758baed3.png 760w,
               /powershell-encoding/solved_ps_hua0003c83d795a1caf463a0107814780f_11172_1200x1200_fit_lanczos_3.png 1200w&#34;
               src=&#34;https://evandde.github.io/powershell-encoding/solved_ps_hua0003c83d795a1caf463a0107814780f_11172_2e5fcd9d08bc5cb7cf1c9f2b5e3e500c.png&#34;
               width=&#34;593&#34;
               height=&#34;153&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h3 id=&#34;powershell을-시작할-때마다-수정되도록-자동실행-스크립트-생성&#34;&gt;PowerShell을 시작할 때마다 수정되도록 자동실행 스크립트 생성&lt;/h3&gt;
&lt;p&gt;PowerShell을 켤 때마다 자동으로 실행되는 스크립트를 만들고 그 스크립트에 &lt;code&gt;$env:LC_ALL&lt;/code&gt; 환경변수를 설정하는 내용을 적으면, 매 번 환경변수를 따로 설정하지 않아도 자동으로 문제가 해결됩니다.&lt;/p&gt;
&lt;p&gt;단, PowerShell에서 외부 스크립트를 실행하기 위해서는 &lt;strong&gt;실행 정책&lt;/strong&gt;의 &lt;strong&gt;제한을 풀어줘야&lt;/strong&gt; 합니다. 먼저, 다음 명령어를 통해 실행 정책 제한을 풀어줍니다.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;Set-ExecutionPolicy unrestricted
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;PowerShell을 켤 때마다 자동으로 실행되는 스크립트의 경로는 &lt;code&gt;$profile&lt;/code&gt; 변수에 저장되어 있습니다. 다음 명령줄을 통해, 만약 해당 경로에 스크립트가 없다면 새로 만들어줍니다. 그 뒤, 만들어진 스크립트 파일에 &lt;code&gt;$env:LC_ALL=&#39;C.UTF-8&#39;&lt;/code&gt; 내용을 추가합니다. 이를 통해, 앞으로는 PowerShell을 새로 시작할 때마다 이 스크립트가 실행되어 환경변수가 설정되도록 할 수 있습니다.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;if(!(Test-Path -path $profile)){ New-Item -Type File -Path $profile -Force }
Add-Content -Path $profile -Value &#39;$env:LC_ALL=&#39;&#39;C.UTF-8&#39;&#39;&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;
&lt;h2 id=&#34;reference&#34;&gt;Reference&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://stackoverflow.com/questions/41139067/git-log-output-encoding-issues-on-windows-10-command-prompt&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://stackoverflow.com/questions/41139067/git-log-output-encoding-issues-on-windows-10-command-prompt&lt;/a&gt;&lt;/p&gt;</description>
    </item>
    
  </channel>
</rss>
